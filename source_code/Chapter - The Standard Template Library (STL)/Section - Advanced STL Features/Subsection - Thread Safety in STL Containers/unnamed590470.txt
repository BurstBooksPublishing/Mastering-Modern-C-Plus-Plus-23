#include <vector>
#include <mutex>

namespace {
    std::vector<int> vec{1, 2, 3, 4};
    std::mutex vec_mtx;
}

void safe_access() {
    std::lock_guard<std::mutex> lock{vec_mtx};
    if (!vec.empty()) vec[0] = 42;
}