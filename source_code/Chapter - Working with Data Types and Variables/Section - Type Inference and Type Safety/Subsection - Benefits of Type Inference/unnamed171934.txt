#include <optional>
#include <stdexcept>

// Returns the value or throws if not available
int get_value();  // declared elsewhere

int value = []() {
    if (auto v = get_value(); v) return v;
    throw std::runtime_error("value unavailable");
}();