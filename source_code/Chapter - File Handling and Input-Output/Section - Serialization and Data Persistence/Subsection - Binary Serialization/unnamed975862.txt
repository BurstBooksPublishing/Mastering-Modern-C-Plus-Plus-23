#include <fstream>
#include <string>
#include <stdexcept>

struct Data {
    int id;
    double value;
};

void serialize(const Data& data, const std::string& filename) {
    std::ofstream ofs(filename, std::ios::binary);
    if (!ofs) throw std::runtime_error("Cannot open file for writing");
    ofs.write(reinterpret_cast<const char*>(&data), sizeof(Data));
    if (!ofs) throw std::runtime_error("Write failed");
}

void deserialize(Data& data, const std::string& filename) {
    std::ifstream ifs(filename, std::ios::binary);
    if (!ifs) throw std::runtime_error("Cannot open file for reading");
    ifs.read(reinterpret_cast<char*>(&data), sizeof(Data));
    if (!ifs || ifs.gcount() != sizeof(Data))
        throw std::runtime_error("Read failed or incomplete");
}